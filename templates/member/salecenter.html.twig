{% extends 'base.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="//g.alicdn.com/sui/sui3/0.0.18/css/sui.min.css">
{% endblock %}
{% set wechat = app.user %}
{% set user = wechat.user %}
{% set member = user.member %}
{% block header %}
    <header class="bar bar-nav">
        <h1 class="title">分销中心</h1>
    </header>
{% endblock %}

{% block body %}
    <div class="content">
        <div class="card member-card-header-pic">
            <div class="card-content">
                <div class="card-content-inner member-inner">
                    <div class="list-block media-list">
                        <ul>
                            <li class="item-content">
                                <div class="item-media">
                                    <img src="http://www.bhyulong.cn/themes/tianxin100/images/photo.png" width="72">
                                </div>
                                <div class="item-inner">
                                    <div class="item-subtitle color-while">微信昵称：{{ wechat.nickname }}</div>
                                    <div class="item-subtitle">资格：普通分销</div>
                                    <div class="item-subtitle">上级：{{ member.parent ? member.parent.user.wechat.nickname : "官网" }}</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="card-footer"></div>
        </div>
        <div class="content-inner">

            <div class="list-block">
                <ul>
                    <li>
                        <div class="item-link item-content">
                            <div class="item-inner">
                                <div class="item-title">分销中心</div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-link item-content">
                            <div class="item-inner">
                                <div class="item-title">我的盟友</div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-link item-content">
                            <div class="item-inner">
                                <div class="item-title">我的积分</div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-link item-content">
                            <div class="item-inner">
                                <div class="item-title">申请提现</div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-link item-content">
                            <div class="item-inner">
                                <div class="item-title">会员积分排行榜</div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $.fn.slideDown = function (speed, callback) {
            //获取元素position
            var position = this.css('position');
            this.show().css({
                position: 'absolute',
                visibility: 'hidden'
            });
            $('html,body').css({
                overflow: 'hidden',
                height: '100%'
            });
            //获取元素高度
            var height = this.height() === 0 ? $(window).height() : this.height();

            //-------通过伸缩元素高度实现动画-------
            //return this.css({
            //    position: position,
            //    visibility: 'visible',
            //    overflow: 'auto',
            //    height: 0
            //}).animate({ height: height, top: $(window).scrollTop() }, speed, null, callback);

            //-------通过移动元素相对位置实现动画-------
            return this.css({
                top: -height,
                left: 0,
                position: position,
                visibility: 'visible',
                overflow: 'auto'
            }).animate({ top: $(window).scrollTop() }, speed, null, callback);
        };

        $.fn.slideUp = function (speed, callback) {
            //获取元素position
            var position = this.css('position');
            this.show().css({
                position: 'absolute',
                visibility: 'auto'
            });
            $('html,body').css({
                overflow: '',
                height: ''
            });
            //获取元素高度
            var height = this.height();
            //-------通过伸缩元素高度实现动画-------
            //return this.css({
            //    position: position,
            //    visibility: 'visible',
            //    overflow: 'hidden',
            //    height: height
            //}).animate({ height: 0 }, speed, null, callback);

            //-------通过移动元素相对位置实现动画-------
            return this.css({
                left: 0,
                position: position,
                visibility: 'visible',
                overflow: 'auto'
            }).animate({ top: -height }, speed, null, callback);
        };
    </script>
{% endblock %}